chrome.runtime.onMessage.addListener((async(e,t,o)=>{"startRecording"===e.command?(console.log("received the message startrecording!"),await chrome.tabs.query({active:!0,lastFocusedWindow:!0,currentWindow:!0},(async function(e){const t=e[0],o=await chrome.tabs.create({url:chrome.runtime.getURL("recording.html"),pinned:!0,active:!0});chrome.tabs.onUpdated.addListener((async function e(n,a){n===o.id&&"complete"===a.status&&(chrome.tabs.onUpdated.removeListener(e),await chrome.tabs.sendMessage(n,{command:"startRecordingOnBackground",body:{currentTab:t}}))}))}))):"stopRecording"===e.command&&console.log("received the message stoprecording!")}));